<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UML Deployment Diagram</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #ffffff;
            font-family: 'Segoe UI', Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        
        .canvas {
            background: white;
            padding: 40px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            overflow-x: auto;
            border-radius: 4px;
        }
        
        svg {
            display: block;
        }

        /* Text Styles */
        text {
            font-family: monospace; /* UML usually favors monospace or clean sans */
            pointer-events: none;
            text-anchor: middle;
            dominant-baseline: middle;
        }

        .node-title {
            font-weight: bold;
            font-size: 14px;
            fill: #333;
        }

        .stereotype {
            font-size: 12px;
            fill: #555;
            font-style: italic; /* UML Convention */
        }

        .artifact-text {
            font-size: 11px;
            fill: #333;
        }

        .protocol-text {
            font-size: 11px;
            fill: #333;
            background-color: white;
        }

        /* Shape Styles */
        /* UML Node: Usually a 3D box. We simulate 2D with specific borders or 3D polygon */
        .uml-node {
            fill: #ffffff;
            stroke: #333;
            stroke-width: 1.5;
        }

        /* UML Artifact: Rectangle with class-like structure */
        .uml-artifact {
            fill: #f4f7f6;
            stroke: #555;
            stroke-width: 1;
        }

        .cloud-boundary {
            fill: none;
            stroke: #999;
            stroke-width: 1.5;
            stroke-dasharray: 10,5;
        }

        /* Connectors */
        .association {
            fill: none;
            stroke: #333;
            stroke-width: 1.2;
        }

        /* Connector Endpoints */
        /* UML Deployment usually uses simple lines, no arrows for physical connection, 
           or open arrows for dependency. We will use simple lines or dependency arrows. */
    </style>
</head>
<body>
    <div class="canvas">
        <svg width="1400" height="1000" xmlns="http://www.w3.org/2000/svg">
            
            <defs>
                <!-- UML Dependency Arrow -->
                <marker id="open-arrow" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
                    <path d="M2,2 L10,6 L2,10" fill="none" stroke="#333" stroke-width="1.2"/>
                </marker>
            </defs>

            <text x="700" y="30" font-size="20" font-weight="bold" fill="#333">UML Deployment Diagram: AI Skill Platform</text>

            <!-- ================= CLOUD BOUNDARY ================= -->
            <rect x="50" y="60" width="1300" height="900" class="cloud-boundary" />
            <text x="120" y="80" class="node-title">«Cloud» AWS VPC</text>

            <!-- ================= CLIENT DEVICE ================= -->
            <!-- 3D Box Simulation for Node -->
            <g transform="translate(50, 400)">
                <!-- Front Face -->
                <rect x="0" y="10" width="120" height="180" class="uml-node"/>
                <!-- Top Face -->
                <path d="M0,10 L20,0 L140,0 L120,10 Z" class="uml-node"/>
                <!-- Side Face -->
                <path d="M120,10 L140,0 L140,180 L120,190 Z" class="uml-node"/>
                
                <text x="60" y="30" class="stereotype">«Device»</text>
                <text x="60" y="45" class="node-title">Client PC</text>

                <!-- Execution Env: Browser -->
                <g transform="translate(10, 60)">
                    <rect width="100" height="120" class="uml-artifact" style="stroke-dasharray: 4,2; fill:none;"/>
                    <text x="50" y="15" class="stereotype">«ExecEnv»</text>
                    <text x="50" y="30" class="node-title">Browser</text>

                    <!-- Artifact -->
                    <rect x="10" y="50" width="80" height="60" class="uml-artifact"/>
                    <text x="50" y="70" class="stereotype">«Artifact»</text>
                    <text x="50" y="85" class="artifact-text">React SPA</text>
                </g>
            </g>

            <!-- ================= K8S CLUSTER NODE ================= -->
            <!-- Representing the Cluster as a large Execution Environment Node -->
            <g transform="translate(250, 100)">
                <!-- Front Face -->
                <rect x="0" y="20" width="850" height="800" class="uml-node" fill="#fafafa"/>
                <!-- Top Face -->
                <path d="M0,20 L30,0 L880,0 L850,20 Z" class="uml-node" fill="#fff"/>
                <!-- Side Face -->
                <path d="M850,20 L880,0 L880,800 L850,820 Z" class="uml-node" fill="#eee"/>

                <text x="425" y="40" class="stereotype">«ExecutionEnvironment»</text>
                <text x="425" y="60" class="node-title">Kubernetes Cluster (EKS)</text>

                <!-- === INGRESS NODE === -->
                <g transform="translate(30, 320)">
                    <rect x="0" y="0" width="100" height="80" class="uml-node"/>
                    <text x="50" y="20" class="stereotype">«Pod»</text>
                    <text x="50" y="35" class="node-title">Ingress</text>
                    <text x="50" y="55" class="artifact-text">{ALB}</text>
                </g>

                <!-- === WEB APP NODE GROUP === -->
                <g transform="translate(180, 100)">
                    <rect width="200" height="280" class="uml-node" style="stroke-dasharray: 5,5; fill:white;"/>
                    <text x="100" y="20" class="stereotype">«NodeGroup»</text>
                    <text x="100" y="35" class="node-title">Web Tier</text>

                    <!-- Artifact: Client UI -->
                    <g transform="translate(20, 50)">
                        <rect width="160" height="60" class="uml-artifact"/>
                        <text x="80" y="15" class="stereotype">«Pod»</text>
                        <text x="80" y="30" class="node-title">Client UI</text>
                        <text x="80" y="45" class="artifact-text">Docker: react-ui</text>
                    </g>

                    <!-- Artifact: Backend -->
                    <g transform="translate(20, 120)">
                        <rect width="160" height="60" class="uml-artifact"/>
                        <text x="80" y="15" class="stereotype">«Pod»</text>
                        <text x="80" y="30" class="node-title">Backend</text>
                        <text x="80" y="45" class="artifact-text">Docker: node-api</text>
                    </g>

                    <!-- Artifact: Redis -->
                    <g transform="translate(20, 190)">
                        <rect width="160" height="60" class="uml-artifact"/>
                        <text x="80" y="15" class="stereotype">«Pod»</text>
                        <text x="80" y="30" class="node-title">Redis</text>
                        <text x="80" y="45" class="artifact-text">Docker: redis:7</text>
                    </g>
                </g>

                <!-- === AI WORKER NODE GROUP === -->
                <g transform="translate(420, 100)">
                    <rect width="220" height="650" class="uml-node" style="stroke-dasharray: 5,5; fill:white;"/>
                    <text x="110" y="20" class="stereotype">«NodeGroup»</text>
                    <text x="110" y="35" class="node-title">AI Tier</text>

                    <!-- Stacked Pods -->
                    <g transform="translate(20, 60)">
                        <!-- Code Analytics -->
                        <rect width="180" height="50" class="uml-artifact"/>
                        <text x="90" y="15" class="stereotype">«Pod»</text>
                        <text x="90" y="30" class="node-title">DSA Analytics</text>
                        <text x="90" y="42" class="artifact-text">Docker: py-dsa</text>
                    </g>
                    <g transform="translate(20, 120)">
                        <rect width="180" height="50" class="uml-artifact"/>
                        <text x="90" y="15" class="stereotype">«Pod»</text>
                        <text x="90" y="30" class="node-title">Transcribe</text>
                        <text x="90" y="42" class="artifact-text">Docker: py-transcribe</text>
                    </g>
                    <g transform="translate(20, 180)">
                        <rect width="180" height="50" class="uml-artifact"/>
                        <text x="90" y="15" class="stereotype">«Pod»</text>
                        <text x="90" y="30" class="node-title">Content Gen</text>
                        <text x="90" y="42" class="artifact-text">Docker: py-content</text>
                    </g>
                    <g transform="translate(20, 240)">
                        <rect width="180" height="50" class="uml-artifact"/>
                        <text x="90" y="15" class="stereotype">«Pod»</text>
                        <text x="90" y="30" class="node-title">Online Editor</text>
                        <text x="90" y="42" class="artifact-text">Docker: py-compiler</text>
                    </g>
                    <g transform="translate(20, 300)">
                        <rect width="180" height="50" class="uml-artifact"/>
                        <text x="90" y="15" class="stereotype">«Pod»</text>
                        <text x="90" y="30" class="node-title">RAG Svc</text>
                        <text x="90" y="42" class="artifact-text">Docker: py-rag</text>
                    </g>
                    <g transform="translate(20, 360)">
                        <rect width="180" height="50" class="uml-artifact"/>
                        <text x="90" y="15" class="stereotype">«Pod»</text>
                        <text x="90" y="30" class="node-title">LLM Gateway</text>
                        <text x="90" y="42" class="artifact-text">Docker: py-llm</text>
                    </g>

                    <!-- Messaging Infra (Nested Node for clarity) -->
                    <g transform="translate(10, 450)">
                        <rect width="200" height="180" class="uml-node" style="fill:#f9f9f9"/>
                        <text x="100" y="20" class="stereotype">«Infrastructure»</text>
                        <text x="100" y="35" class="node-title">Event Bus</text>
                        
                        <g transform="translate(20, 50)">
                            <rect width="160" height="50" class="uml-artifact"/>
                            <text x="80" y="15" class="stereotype">«Pod»</text>
                            <text x="80" y="30" class="node-title">Kafka Broker</text>
                        </g>
                        <g transform="translate(20, 110)">
                            <rect width="160" height="50" class="uml-artifact"/>
                            <text x="80" y="15" class="stereotype">«Pod»</text>
                            <text x="80" y="30" class="node-title">Zookeeper</text>
                        </g>
                    </g>
                </g>

                <!-- === ANALYTICS NODE GROUP === -->
                <g transform="translate(660, 100)">
                    <rect width="180" height="350" class="uml-node" style="stroke-dasharray: 5,5; fill:white;"/>
                    <text x="90" y="20" class="stereotype">«NodeGroup»</text>
                    <text x="90" y="35" class="node-title">Analytics Tier</text>

                    <g transform="translate(10, 60)">
                        <rect width="160" height="50" class="uml-artifact"/>
                        <text x="80" y="15" class="stereotype">«Pod»</text>
                        <text x="80" y="30" class="node-title">Dashboard</text>
                    </g>
                    <g transform="translate(10, 120)">
                        <rect width="160" height="50" class="uml-artifact"/>
                        <text x="80" y="15" class="stereotype">«Pod»</text>
                        <text x="80" y="30" class="node-title">User Activity</text>
                    </g>
                    <g transform="translate(10, 180)">
                        <rect width="160" height="50" class="uml-artifact"/>
                        <text x="80" y="15" class="stereotype">«Pod»</text>
                        <text x="80" y="30" class="node-title">Data Analytics</text>
                    </g>
                    <g transform="translate(10, 240)">
                        <rect width="160" height="50" class="uml-artifact"/>
                        <text x="80" y="15" class="stereotype">«Pod»</text>
                        <text x="80" y="30" class="node-title">Notification</text>
                    </g>
                </g>
            </g>

            <!-- ================= DATABASE NODE ================= -->
            <g transform="translate(1150, 400)">
                <!-- Front Face -->
                <rect x="0" y="10" width="120" height="100" class="uml-node"/>
                <!-- Top Face -->
                <path d="M0,10 L20,0 L140,0 L120,10 Z" class="uml-node"/>
                <!-- Side Face -->
                <path d="M120,10 L140,0 L140,100 L120,110 Z" class="uml-node"/>
                
                <text x="60" y="40" class="stereotype">«DatabaseSystem»</text>
                <text x="60" y="55" class="node-title">MongoDB</text>
                <text x="60" y="70" class="artifact-text">Atlas Managed</text>
            </g>

            <!-- ================= CONNECTORS (Strict Routing) ================= -->
            
            <!-- Client PC -> Ingress -->
            <path d="M190,500 L280,500 L280,460" class="association"/>
            <text x="235" y="490" class="protocol-text">«HTTPS»</text>

            <!-- Ingress -> Client UI -->
            <path d="M380,440 L400,440 L400,290 L450,290" class="association"/>
            
            <!-- Ingress -> Backend -->
            <path d="M380,440 L400,440 L400,360 L450,360" class="association"/>
            <text x="410" y="400" class="protocol-text">«Route»</text>

            <!-- Backend -> Redis -->
            <path d="M530,380 L530,430" class="association"/>
            <text x="545" y="405" class="protocol-text">«TCP»</text>

            <!-- Backend -> AI Tier -->
            <path d="M630,360 L690,360" class="association"/>
            <text x="660" y="350" class="protocol-text">«HTTP/REST»</text>

            <!-- AI Tier -> Kafka -->
            <path d="M780,550 L780,630 L710,630 L710,650" class="association"/>
            <text x="790" y="590" class="protocol-text">«Producer»</text>

            <!-- Kafka -> Analytics Tier -->
            <path d="M860,650 L910,650 L910,530" class="association"/>
            <text x="910" y="600" class="protocol-text" transform="rotate(-90 910 600)">«Consumer»</text>

            <!-- Analytics Tier -> MongoDB -->
            <path d="M1090,360 L1120,360 L1120,450 L1150,450" class="association"/>
            <text x="1110" y="400" class="protocol-text">«TCP»</text>

            <!-- Backend -> MongoDB -->
            <path d="M630,340 L1120,340 L1120,450" class="association"/>

            <!-- AI Tier -> MongoDB -->
            <path d="M890,340 L1120,340" class="association"/>

        </svg>
    </div>
</body>
</html>